<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="com.smhrd.foodie.mapper.CartMapper">
 	
 	<!-- 장바구니 목록 출력 -->
 	<select id="list" parameterType="com.smhrd.foodie.model.CartItems" resultType="com.smhrd.foodie.model.CartItems">
	select b.basket_idx,a.ingre_idx,a.ingre_img, a.ingre_name,a.ingre_price,b.mem_id,b.ingre_cnt
	from ingredient_info a,basket_info b
	where a.ingre_idx = b.ingre_idx
	and b.mem_id = #{mem_id}
	</select>
	
	<!-- 장바구니 항목 삭제 -->
	<delete id="deleteItem" parameterType="com.smhrd.foodie.model.CartItems">
	delete from basket_info where mem_id = #{mem_id} and ingre_idx = #{ingre_idx}
	</delete>
		
	<!-- 장바구니 목록 수정 -->
	<update id="updateItem" parameterType="com.smhrd.foodie.model.CartItems">
	update basket_info set ingre_cnt = #{ingre_cnt} where basket_idx = #{basket_idx}
	</update>
	
	<!-- 주문완료 시 order info에 저장 -->
	<insert id="checkoutSuccess" parameterType="com.smhrd.foodie.model.CartItems">
	insert into order_info (order_idx,mem_id,total_amount,order_addr) values (#{order_idx},#{mem_id},#{total_amount},#{order_addr})
	</insert>
		
 </mapper>